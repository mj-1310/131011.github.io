---
layout: post
title: "머신러닝 02. 탐색적 데이터분석: 기술통계분석(EDA)"
author: "MJ"
categories: [science, statistical_method]
tags: [statistics, machinelearning, multicampus, bigdata_analysis_edu, EDA]
image: 
---

---
&nbsp; &nbsp; **목차**<br>
&nbsp; &nbsp; 1. [기술통계 함수](#1)<br>
&nbsp; &nbsp;&nbsp; (1) [범주형, 연속형 데이터 요약](#1_1)<br>
&nbsp; &nbsp; 2. [데이터셋을 처음 접할 때 할 일: dplyr이 가장 편리](#2)<br>
&nbsp; &nbsp;&nbsp; (1) [ggplot2에 내장된 diamonds 데이터셋 로딩](#2_1)<br>
&nbsp; &nbsp;&nbsp; (2) [데이터셋 조회: psych::headTail](#2_2)<br>
&nbsp; &nbsp;&nbsp; (3) [데이터셋 구조 파악: dplyrs::glimpse()](#2_3)<br>
&nbsp; &nbsp;&nbsp; (4) [데이터셋 기술 통계: summary() | Hmisc::describe() | prettyR::describe() | psych::describe() | skimr::skim()](#2_4)<br>
&nbsp; &nbsp; 3. [인덱싱 / 셀렉션: 컬럼 대상](#3)<br>
&nbsp; &nbsp;&nbsp; (1) [특정 변수 컬럼 인덱싱 / 셀렉션: 직접 | subset() | dplyr::select](#3_1)<br>
&nbsp; &nbsp;&nbsp; (2) [특정 변수 컬럼 1개 제외하고 인덱싱 / 셀렉션](#3_2)<br>
&nbsp; &nbsp;&nbsp; (3) [특정 변수 컬럼 2개 이상 지정해서 인덱싱 / 셀렉션](#3_3)<br>
&nbsp; &nbsp;&nbsp; (4) [특정 변수 컬럼 2개 이상 제외하고 인덱싱 / 셀렉션](#3_4)<br>
&nbsp; &nbsp;&nbsp; (5) [연속된 위치의 변수 컬럼 인덱싱 / 셀렉션: 콜론(:) 기호 이용](#3_5)<br>
&nbsp; &nbsp;&nbsp; (6) [연속된 위치의 변수 컬럼 제외하고 인덱싱 / 셀렉션: 콜론(:) 기호 이용](#3_6)<br>
&nbsp; &nbsp; 4. [정규표현식으로 데이터 탐색](#4)<br>

---

<br>


## 1. 기술통계 분석

* 기술통계 분석에서 중점을 두는 과제: 중심성, 변동가능성, 정규성
* 중심성(centrality): 데이터가 **어느 부분**에 집중되어 있는가
* 변동성(variability): 데이터가 가운데를 중심으로 **얼마나 흩어져** 있는가 (첨도로 측정)
* 정규성(normality): 데이터가 **정규분포 모양에서 얼마나 벗어나** 있는가	(왜도로 측정)




---------------코딩------------------------------------------------------------------------------------------------------
<br><br>

<a id="1"></a>

## 1. 기술통계 함수

<br>

<a id="1_1"></a>

### (1) 범주형, 연속형 데이터 요약

<br>

```
str() 	# 변수 내부 구조 표시. class 정보, mode 정보, length 정보 한번에 알 수 있음
table() # 범주형 변수의 빈도수 계산
mean()

sum() 	# 합
min()	# 최솟값
max()	# 최댓값
var()	# 분산
sd()	# 표준편차
```

<br><br>

<a id="2"></a>

## 2. 데이터셋을 처음 접할 때 할 일: dplyr이 가장 편리

<br>

<a id="2_1"></a>

### (1) ggplot2에 내장된 diamonds 데이터셋 로딩

<br>

```
install.packages("ggplot2")
library(ggplot2)
help(package = "ggplot2")	# 패키지의 코드에 대한 도움말 호출
data(package = "ggplot2")	# 패키지에 들어있는 데이터 목록 호출
data(diamonds)				# 다이아몬드 데이터만 호출
```
<br>

<a id="2_2"></a>

### (2) 데이터셋 조회: psych::headTail

<br>

```
diamonds
View(diamonds)		# 별도의 창에 데이터 표시
head(diamonds)
head(diamonds, n=15)
tail(diamonds)

library(psych)
psych::headTail(diamonds)
```
<br>

* tibble 구조에서는 변수 컬럼명 밑에 데이터 유형이 표시됨. 
* ord: ordered. 팩터형(서열형) 변수
* dbl: double. 실수형 변수
* tibble 구조는 데이터 조회할 때 콘솔 창이 허용하는 범위 내에서 데이터를 보여준다

<br>

* View() 함수의 장점: 데이터를 오름차순, 내림차순으로 쉽게 확인 가능

<br>

<a id="2_3"></a>

### (3) 데이터셋 구조 파악: dplyrs::glimpse()

<br>

```
str(diamonds)

library(tibble)
glimpse(diamonds)
```

<br>

<a id="2_4"></a>

### (4) 데이터셋 기술 통계: summary() / Hmisc::describe() / prettyR::describe() / psych::describe() / skimr::skim()

<br>

```
summary(diamonds)

library(Hmisc)
Hmisc::describe(diamonds)

library(prettyR)
prettyR::describe(diamonds)

library(psych)
psych::describe(diamonds)

library(skimr)
skim(diamonds)
```

<br>

* summary(): 변수컬럼 별로 6가지 정보 안내
* 중심성을 표현하는 건 mean, median. 둘 사이의 차이가 얼마나 큰지를 살피자
* min / max / 1stQu. / 3rdQu.를 이용해 오른쪽 꼬리분포인지 왼쪽 꼬리분포인지, 정규분포인지 예상 해보자

<br>

* Hmisc::describe(): 변수컬럼 별로 summary()보다 상세한 정보 제공
* missing data 개수를 보여준다.
* 연속형 변수와 범주형 변수 별로 다른 정보를 보여준다.
* 연속형 변수에서는
	- info: 0에 가까울수록 범주 데이터일 가능성이 높고, 1에 가까울수록 연속 데이터일 가능성이 높다.
	- lowest, highest: 최소, 최대의 극단값을 5개 정도씩 보여준다.
* 범주형 변수에서는
	- value: 범주 항목 내용
	- Frequency: 빈도
	- Proportion: 비율

<br>

* prettyR::describe(): 연속데이터끼리, 범주형데이터끼리 묶어서 보여준다.
* 연속형 데이터: mean, median, var, sd, valid.n(레코드 개수) 제공
* 범주형 데이터: 범주항목 별로 count, percent 제공

<br>

* psych::describe(): 가장 여러가지 정보를 보여주는 함수
* 연속과 범주형 변수 구분 X: n(레코드 개수), mean, sd, median, trimmed, mad, min, max, range, skew, kurtosis, se 제공
* trimmed: 5%까지 잘라낸 값. 이 값과 mean 값의 차이가 크면 5% 내에 극단값 있을 가능성이 높다.
* 오른쪽 꼬리 분포(skewed to the right): 왜도(skewness)는 양수. 절댓값 클수록 긴꼬리 분포
* 왼쪽 꼬리 분포(skewed to the left): 왜도는 음수. 절댓값 클수록 긴꼬리 분포
* 정규분포의 첨도(kurtosis)는 0
* kurtosis > 0 : 분포가 중앙에 덜 집중(뭉툭)
* kurtosis < 0 : 분포가 중앙에 더 집중(뾰족)
* 분포들 간의 뾰족한 정도를 비교할 때 중요한 점은 분포가 동일한 분산을 가가정하고, 첨도를 비교해야 한다.

<br>

* skimr {skim} : 연속 데이터와 범주형 데이터를 구분해서 표시하며, 연속데이터는 시각적 그래프 그려준다.

<br><br>

<a id="3"></a>

## 3. 인덱싱 / 셀렉션: 컬럼 대상

<br>

<a id="3_1"></a>

### (1) 특정 변수 컬럼 인덱싱 / 셀렉션: 직접 / subset() / dplyr::select

<br>

```
diamonds$carat


diamonds["carat"]
diamonds[ , "carat"]
diamonds[1]
diamonds[ , 1]


subset(diamonds, select = "carat")
subset(diamonds, select = 1)


library(dplyr)
select(diamonds, carat)
select(diamonds, 1)


library(magrittr)
diamonds %>% subset(select = "carat")
diamonds %>% subset(select = 1)

diamonds %>% select(carat)
diamonds %>% select(1)
```

<br>

* base {subset} 함수: 변수 컬럼명이나 인덱스 번호로 인덱싱. 티블(data.frame)형 인덱싱
* dplyr::select() : dplyr패키지는 tibble 구조 데이터 다룰 때 속도 면에서 data.frame 보다도 빠름


<br>

<a id="3_2"></a>

### (2) 특정 변수 컬럼 1개 제외하고 인덱싱 / 셀렉션

<br>

```
diamonds[-1]
diamonds[ , -1]


subset(diamonds, select = -1)
diamonds %>% subset(select = -1)


library(dplyr)
select(diamonds, -carat)
select(diamonds, -1)
diamonds %>% select(-carat)
diamonds %>% select(-1)
```

<br>

<a id="3_3"></a>

### (3) 특정 변수 컬럼 2개 이상 지정해서 인덱싱 / 셀렉션
<br>

```
diamonds[c("carat", "price")]
diamonds[ , c("carat", "price")]
diamonds[c(1, 7)]
diamonds[ , c(1, 7)]


target <- c("carat", "price")
diamonds[target]
diamonds[ , target]
target2 <- c(1, 7)
diamonds[target2]
diamonds[ , target2]


subset(diamonds, select = c("carat", "price"))
subset(diamonds, select = c(1, 7))
diamonds %>% subset(select = target)
diamonds %>% subset(select = target2)


library(dplyr)
select(diamonds, carat, price)
select(diamonds, 1, 7)
diamonds %>% select(target)
diamonds %>% select(target2)
```
<br>

* 지정할 목록이 많을 때는 벡터 변수를 사용해 주면 편리하고, 관리에 용이

<br>

<a id="3_4"></a>

### (4) 특정 변수 컬럼 2개 이상 제외하고 인덱싱 / 셀렉션
<br>

```
diamonds[c(-1, -7)]
diamonds[ , c(-1, -7)]
diamonds[-c(1, 7)]
diamonds[ , -c(1, 7)]
diamonds[-target2]


subset(diamonds, select = c(-1, -7))
subset(diamonds, select = -c(1, 7))
subset(diamonds, select = -target2)
diamonds %>% subset(select = -target2)


library(dplyr)
select(diamonds, -carat, -price)
select(diamonds, -1, -7)
select(diamonds, -target)
select(diamonds, -target2)
diamonds %>% select(-target)
diamonds %>% select(-target2)
```
<br>

<a id="3_5"></a>

### (5) 연속된 위치의 변수 컬럼 인덱싱 / 셀렉션: 콜론(:) 기호 이용

<br>

```
diamonds[c(1:4)]
diamonds[ , c(1:4)]
diamonds[1:4]
diamonds[ , 1:4]
diamonds[target2]
diamonds[ , target2]


subset(diamonds, select = c(1:4))
subset(diamonds, select = 1:4)
subset(diamonds, select = target2)
diamonds %>% subset(select = target2)


library(dplyr)
select(diamonds, carat:clarity)
select(diamonds, c(1:4))
select(diamonds, 1:4)
select(diamonds, target)
select(diamonds, target2)
diamonds %>% select(target)
diamonds %>% select(target2)
```
<br>

<a id="3_6"></a>

### (6) 연속된 위치의 변수 컬럼 제외하고 인덱싱 / 셀렉션: 콜론(:) 기호 이용

<br>

```
diamonds[-c(1:4)]
diamonds[ , -c(1:4)]
diamonds[c(-1:-4)]
diamonds[ , c(-1:-4)]
diamonds[-1:-4]
diamonds[ , -1:-4]
diamonds[-(1:4)]
diamonds[ , -(1:4)]
diamonds[-target2]
diamonds[ , -target2]


subset(diamonds, select = c(-1:-4))
subset(diamonds, select = -c(1:4))
subset(diamonds, select = -1:-4)
subset(diamonds, select = -(1:4))
subset(diamonds, select = -target2)
diamonds %>% subset(select = -target2)


library(dplyr)
select(diamonds, -carat:-clarity)
select(diamonds, -(carat:clarity))
select(diamonds, -1:-4)
select(diamonds, -(1:4))
select(diamonds, -target2)
diamonds %>% select(-carat:-clarity)
diamonds %>% select(-target2)
```
<br><br>

<a id="4"></a>

## 4. 정규표현식으로 데이터 탐색

<br>

<a id="4_1"></a>

### (1) 데이터셋 로딩 및 요약: ames_raw

```
library(help = AmesHousing)
help(package = AmesHousing)

data(ames_raw, package = "AmesHousing")
help(ames_raw)

psych::headTail(ames_raw)		# 데이터셋 조회
dplyr::glimpse(ames_raw)				# 데이터셋 구조파악
skimr::skim(ames_raw)			# 데이터셋 기술통계
```
<br>

<a id="4_2"></a>

### (2) grep 함수로 찾기	

<br>

```
grep(pattern = "Exter", x = colnames_(ames_raw), x =colnames & toduse;ect::starts_with()
```

<br>

* grep 함수의 인자: 

<br><br>

###### <참고 문헌>
<br>
1. 데이터과학 입문자를 위한 R (제리드 랜더 지음) <br>
2. 최점기 박사님 강의